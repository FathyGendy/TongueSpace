@page
@model IndexModel
@{
    ViewData["Title"] = "Welcome to TongueSpace";
}

<section class="hero-section">
    <div class="hero-content">
        <div class="container">
            <div class="row align-items-center min-vh-100">
                <div class="col-lg-6">
                    <div class="hero-text">
                        <h1 class="hero-title">
                            Welcome to
                            <span class="brand-gradient">TongueSpace</span>
                        </h1>
                        <p class="hero-subtitle">
                            Explore • Learn • Connect
                        </p>
                        <p class="hero-description">
                            Master any language in our global learning space. Join thousands of learners
                            worldwide and unlock new opportunities through language mastery.
                        </p>
                        <div class="hero-buttons">
                            <a href="/Courses" class="btn btn-primary btn-lg me-3">
                                <i class="bi bi-rocket-takeoff"></i> Start Learning
                            </a>
                            <a href="#features" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-play-circle"></i> Learn More
                            </a>
                        </div>
                        <div class="hero-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="courseCount">6+</div>
                                <div class="stat-label">Courses</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">5</div>
                                <div class="stat-label">Languages</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="userCount">100+</div>
                                <div class="stat-label">Students</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="hero-visual">
                        <div class="floating-card card-1">
                            <div class="language-icon">🇸🇦</div>
                            <div class="card-text">Arabic</div>
                        </div>
                        <div class="floating-card card-2">
                            <div class="language-icon">🇩🇪</div>
                            <div class="card-text">German</div>
                        </div>
                        <div class="floating-card card-3">
                            <div class="language-icon">🇺🇸</div>
                            <div class="card-text">English</div>
                        </div>
                        <div class="floating-card card-4">
                            <div class="language-icon">🇫🇷</div>
                            <div class="card-text">French</div>
                        </div>
                        <div class="floating-card card-5">
                            <div class="language-icon">🇪🇸</div>
                            <div class="card-text">Spanish</div>
                        </div>
                        <div class="hero-globe">
                            <div class="globe-inner">
                                <div class="globe-text">🌍</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hero-scroll">
        <a href="#features" class="scroll-indicator">
            <i class="bi bi-chevron-down"></i>
        </a>
    </div>
</section>

<section id="features" class="features-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title">Why Choose TongueSpace?</h2>
                <p class="section-subtitle">Everything you need to master a new language</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-globe-americas"></i>
                    </div>
                    <h4>Global Community</h4>
                    <p>Connect with learners and native speakers from around the world in our interactive learning environment.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-person-check"></i>
                    </div>
                    <h4>Expert Instructors</h4>
                    <p>Learn from certified native speakers and experienced language teachers with proven teaching methods.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-graph-up-arrow"></i>
                    </div>
                    <h4>Track Progress</h4>
                    <p>Monitor your learning journey with detailed progress tracking and personalized learning recommendations.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-clock"></i>
                    </div>
                    <h4>Flexible Learning</h4>
                    <p>Study at your own pace with 24/7 access to lessons, exercises, and learning materials.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-award"></i>
                    </div>
                    <h4>Certificates</h4>
                    <p>Earn completion certificates to showcase your language skills to employers and educational institutions.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-phone"></i>
                    </div>
                    <h4>Mobile Ready</h4>
                    <p>Learn anywhere, anytime with our responsive design that works perfectly on all devices.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="languages-section py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title">Available Languages</h2>
                <p class="section-subtitle">Choose from our diverse range of language courses</p>
            </div>
        </div>
        <div class="row g-4" id="languageCards">
            </div>
        <div class="text-center mt-5">
            <a href="/Courses" class="btn btn-primary btn-lg">
                <i class="bi bi-collection"></i> View All Courses
            </a>
        </div>
    </div>
</section>

<section class="cta-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <div class="cta-content">
                    <h2 class="cta-title">Ready to Start Your Language Journey?</h2>
                    <p class="cta-subtitle">Join thousands of learners who have already transformed their lives through language learning</p>
                    <div class="cta-buttons">
                        <a href="/Register" id="signUpLink" class="btn btn-light btn-lg me-3">
                            <i class="bi bi-person-plus"></i> Sign Up Free
                        </a>
                        <a href="/Courses" class="btn btn-outline-light btn-lg me-3">
                            <i class="bi bi-search"></i> Browse Courses
                        </a>
                        <a href="/apply-instructor" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-mortarboard"></i> Become an Instructor
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="alreadySignedInModal" tabindex="-1" aria-labelledby="alreadySignedInModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="alreadySignedInModalLabel">You are already signed in!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <i class="bi bi-info-circle display-4 text-primary mb-3"></i>
                    <h6>Thanks for joining us!</h6>
                    <p class="text-muted">You are already logged into your account. Please log out first if you wish to create a new one.</p>
                </div>
            </div>
            <div class="modal-footer">
                <a href="/Logout" class="btn btn-primary">Log Out</a>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Stay Signed In</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Consolidated all JavaScript into a single script block for efficiency and clarity
        document.addEventListener('DOMContentLoaded', function () {
            const signUpLink = document.getElementById('signUpLink');
            const isUserAuthenticated = @(User?.Identity?.IsAuthenticated.ToString().ToLower() ?? "false");

            if (isUserAuthenticated) {
                signUpLink.href = "#"; // Change the link to a dummy href
                signUpLink.addEventListener('click', function (event) {
                    event.preventDefault(); // Stop the default link action
                    const modal = new bootstrap.Modal(document.getElementById('alreadySignedInModal'));
                    modal.show();
                });
            }

            // Animate statistics
            animateStats();

            // Load language data and create cards
            loadLanguageCards();

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });

        async function loadLanguageCards() {
            try {
                const response = await fetch(`${window.location.origin}/api/courses`);
                if (response.ok) {
                    const courses = await response.json();

                    // Group courses by language
                    const languageStats = {};
                    courses.forEach(course => {
                        if (!languageStats[course.language]) {
                            languageStats[course.language] = {
                                count: 0,
                                levels: new Set(),
                                totalLessons: 0
                            };
                        }
                        languageStats[course.language].count++;
                        languageStats[course.language].levels.add(course.level);
                        languageStats[course.language].totalLessons += course.lessonCount;
                    });

                    const container = document.getElementById('languageCards');
                    const languageFlags = {
                        'Arabic': '🇸🇦',
                        'English': '🇺🇸',
                        'German': '🇩🇪',
                        'French': '🇫🇷',
                        'Spanish': '🇪🇸'
                    };

                    const languageColors = {
                        'Arabic': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                        'English': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                        'German': 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                        'French': 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                        'Spanish': 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'
                    };

                    container.innerHTML = Object.entries(languageStats)
                        .map(([language, stats]) => `
                        <div class="col-md-6 col-lg-4">
                            <div class="language-card" style="background: ${languageColors[language]}">
                                <div class="language-card-content">
                                    <div class="language-flag">${languageFlags[language] || '🌍'}</div>
                                    <h4 class="language-name">${language}</h4>
                                    <div class="language-stats">
                                        <div class="stat">${stats.count} Course${stats.count !== 1 ? 's' : ''}</div>
                                        <div class="stat">${stats.levels.size} Level${stats.levels.size !== 1 ? 's' : ''}</div>
                                        <div class="stat">${stats.totalLessons} Lessons</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `)
                        .join('');
                }
            } catch (error) {
                console.error('Error loading language data:', error);
            }
        }

        function animateStats() {
            const animateValue = (element, start, end, duration) => {
                const startTimestamp = performance.now();
                const step = (timestamp) => {
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const current = Math.floor(progress * (end - start) + start);
                    element.textContent = current + '+';
                    if (progress < 1) {
                        requestAnimationFrame(step);
                    }
                };
                requestAnimationFrame(step);
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const courseCount = document.getElementById('courseCount');
                        const userCount = document.getElementById('userCount');

                        if (courseCount && !courseCount.dataset.animated) {
                            animateValue(courseCount, 0, 6, 2000);
                            courseCount.dataset.animated = 'true';
                        }

                        if (userCount && !userCount.dataset.animated) {
                            animateValue(userCount, 0, 150, 2500);
                            userCount.dataset.animated = 'true';
                        }
                    }
                });
            });

            document.querySelectorAll('.stat-number').forEach(el => {
                observer.observe(el);
            });
        }
    </script>
}

<style>
/* Hero Section */
.hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    color: white;
    position: relative;
    overflow: hidden;
    min-height: 100vh;
    display: flex;
    align-items: center;
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.1);
    z-index: 1;
}

.hero-content {
    position: relative;
    z-index: 2;
    width: 100%;
}

.brand-gradient {
    background: linear-gradient(45deg, #fff, #f0f0f0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: bold;
}

.hero-title {
    font-size: 3.5rem;
    font-weight: bold;
    margin-bottom: 1rem;
    line-height: 1.2;
}

.hero-subtitle {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    opacity: 0.9;
    font-weight: 300;
    letter-spacing: 2px;
}

.hero-description {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    opacity: 0.85;
    line-height: 1.6;
}

.hero-buttons {
    margin-bottom: 3rem;
}

.hero-stats {
    display: flex;
    gap: 2rem;
}

.stat-item {
    text-align: center;
}

.stat-number {
    font-size: 2rem;
    font-weight: bold;
    display: block;
}

.stat-label {
    opacity: 0.8;
    text-transform: uppercase;
    font-size: 0.9rem;
    letter-spacing: 1px;
}

/* Hero Visual */
.hero-visual {
    position: relative;
    height: 500px;
}

.floating-card {
    position: absolute;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    padding: 1rem;
    text-align: center;
    animation: float 6s ease-in-out infinite;
}

.floating-card .language-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.floating-card .card-text {
    font-weight: bold;
    font-size: 0.9rem;
}

.card-1 {
    top: 10%;
    left: 10%;
    animation-delay: 0s;
}

.card-2 {
    top: 20%;
    right: 15%;
    animation-delay: 1s;
}

.card-3 {
    top: 50%;
    left: 5%;
    animation-delay: 2s;
}

.card-4 {
    bottom: 30%;
    right: 10%;
    animation-delay: 3s;
}

.card-5 {
    bottom: 10%;
    left: 20%;
    animation-delay: 4s;
}

.hero-globe {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 150px;
    height: 150px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pulse 4s ease-in-out infinite;
}

.globe-inner {
    font-size: 4rem;
    animation: rotate 20s linear infinite;
}

.hero-scroll {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 2;
}

.scroll-indicator {
    color: white;
    font-size: 2rem;
    animation: bounce 2s infinite;
}

/* Features Section */
.features-section {
    padding: 5rem 0;
}

.section-title {
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 1rem;
    background: linear-gradient(45deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.section-subtitle {
    font-size: 1.2rem;
    color: #6c757d;
}

.feature-card {
    text-align: center;
    padding: 2rem;
    border-radius: 15px;
    background: white;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    height: 100%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
}

.feature-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(45deg, #667eea, #764ba2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.5rem;
    font-size: 2rem;
    color: white;
}

/* Language Cards */
.language-card {
    border-radius: 20px;
    padding: 2rem;
    text-align: center;
    color: white;
    transition: transform 0.3s ease;
    cursor: pointer;
    height: 100%;
}

.language-card:hover {
    transform: translateY(-10px);
}

.language-flag {
    font-size: 4rem;
    margin-bottom: 1rem;
}

.language-name {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 1rem;
}

.language-stats .stat {
    font-size: 0.9rem;
    opacity: 0.9;
    margin-bottom: 0.5rem;
}

/* CTA Section */
.cta-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 5rem 0;
}

.cta-title {
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 1rem;
}

.cta-subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    margin-bottom: 2rem;
}

/* Animations */
@@keyframes float {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-20px);
    }
}

@@keyframes pulse {
    0%, 100% {
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        transform: translate(-50%, -50%) scale(1.1);
    }
}

@@keyframes rotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

@@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}

/* Responsive */
@@media (max-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
    }

    .hero-stats {
        gap: 1rem;
        justify-content: center;
    }

    .floating-card {
        display: none;
    }

    .hero-visual {
        height: 300px;
    }
}
</style>